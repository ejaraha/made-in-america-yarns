mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)")) %>%
select(order_id,
product_id,
variation_id,
quantity) %>%
glimpse()
data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)")) %>%
select(order_id,
product_id,
variation_id,
quantity) %>%
glimpse()
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(., "(?<=name:).*(?=product_id:)")),start=1, end=-2))
order_product <- order_main_pivot %>%
select(order_id,
product_id,
variation_id,
quantity)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(., "(?<=name:).*(?=product_id:)")),start=1, end=-2))
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2))
order_product <- order_main_pivot %>%
select(order_id,
product_id,
variation_id,
quantity)
product <- order_main_pivot %>%
separate(names, into = c("name", "color"), sep = "-") %>%
select(product_id,
variation_id,
name,
color)
product <- order_main_pivot %>%
separate(names, into = c("name", "color"), sep = " - ") %>%
select(product_id,
variation_id,
name,
color)
product <- order_main_pivot %>%
separate(name, into = c("name", "color"), sep = " - ") %>%
select(product_id,
variation_id,
name,
color)
product <- order_main_pivot %>%
separate(name, into = c("name", "color"), sep = "-") %>%
select(product_id,
variation_id,
name,
color)
glimpse(order_main_pivot)
product <- order_main_pivot %>%
separate(name, into = c("name", "color"), sep = "-", extra="merge", fill="right") %>%
select(product_id,
variation_id,
name,
color)
glimpse(product)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:).*(?=|_reduced_stock:)"))
order_product <- order_main_pivot %>%
select(order_id,
product_id,
variation_id,
quantity)
order_coupon <- data$order_main %>%
select(order_id,
coupon)
# product_
product <- order_main_pivot %>%
select(product_id,
variation_id,
name,
color)
glimpse(product)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:).*(?=|)"))
order_product <- order_main_pivot %>%
select(order_id,
product_id,
variation_id,
quantity)
# product_
product <- order_main_pivot %>%
select(product_id,
variation_id,
name,
color)
glimpse(product)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:)[:alpha:]*(?=_reduced_stock:)"))
glimpse(order_main_pivot)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:).*(?=|_reduced_stock:)"))
glimpse(order_main_pivot)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:)[:alpha:]*"))
glimpse(order_main_pivot)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:)[:alpha:]*")) %>%
separate(name, into = c("name, detail"), sep = "-", extra="merge", fill="right")
glimpse(order_main_pivot)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:)[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right")
glimpse(order_main_pivot)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:)[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim(.))
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:)[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
glimpse(order_main_pivot)
order_product <- order_main_pivot %>%
select(order_id,
product_id,
variation_id,
quantity)
glimpse(order_product)
product <- order_main_pivot %>%
select(product_id,
variation_id,
name,
color)
glimpse(product)
order_main_pivot %>%
select(product_id,
variation_id,
name,
color) %>%
filter(is.na(color)==TRUE) %>% glimpse()
order_main_pivot %>%
select(product_id,
variation_id,
name,
detail,
color) %>%
filter(is.na(color)==TRUE,
is.na(variation_id)==FALSE) %>% glimpse()
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color|colors:)[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
order_main_pivot %>%
select(product_id,
variation_id,
name,
detail,
color) %>%
filter(is.na(color)==TRUE,
is.na(variation_id)==FALSE) %>% glimpse()
order_main_pivot %>%
select(product_id,
variation_id,
name,
detail,
color) %>%
filter(is.na(color)==TRUE,
is.na(variation_id)==FALSE) %>% select(detail)
product <- order_main_pivot %>%
select(product_id,
variation_id,
name,
detail,
color) %>%
filter(is.na(color)==TRUE,
is.na(variation_id)==FALSE)
View(product)
View(order_main_pivot)
View(order_main_pivot)
View(product)
View(order_main_pivot)
data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color|colors:)[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim) %>% write.csv("test.csv")
data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:|colors:)[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim) %>% write.csv("test.csv")
glimpse(product)
glimpse(data$product_main)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:|colors:)[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
order_main_pivot %>% filter(product_id == 0) %>% glimpse()
pid_zero <- order_main_pivot %>% filter(product_id == 0)
order_pid_zero <- order_main_pivot %>% filter(product_id == 0)
View(order_pid_zero)
View(order_pid_zero)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:|colors:)[:alpha:]|[:space:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
order_pid_zero <- order_main_pivot %>% filter(product_id == 0)
test<- "hi world"
str_extract(test, "[:alpha:]*[:space:]*")
str_extract(test, "[:alpha:]*[:space:]*[:alpha:]*")
str_extract(test, "[:alpha:]*[:space:]*[:alpha:]*[:space:]*[:alpha:]*")
test <- "hi"
str_extract(test, "[:alpha:]*[:space:]*[:alpha:]*[:space:]*[:alpha:]*")
test <- "hi | yo"
str_extract(test, "[:alpha:]*[:space:]*[:alpha:]*[:space:]*[:alpha:]*")
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:|colors:)[:alpha:]*[:space:]*[:alpha:]*[:space:]*[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:|colors:)[:alpha:]*[:space:]*[:alpha:]*[:space:]*[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
order_pid_zero <- order_main_pivot %>% filter(product_id == 0)
glimpse(data$product_main)
product_main <- data$product_main %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
View(product_main)
View(product_main)
View(product_main)
View(product_main)
View(order_pid_zero)
order_pid_zero <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:|colors:)[:alpha:]*[:space:]*[:alpha:]*[:space:]*[:alpha:]*")) %>%
filter(product_id == 0)
product_main <- data$product_main
test <- product_main %>% left_join(., order_pid_zero, by="name")
View(test)
test %>% filter(is.na(order_id) == FALSE) %>% glimpse()
test <- product_main %>%
left_join(., order_pid_zero, by="name") %>%
filter(is.na(order_id) == FALSE)
product_main %>%
left_join(., order_pid_zero, by="name") %>%
filter(is.na(order_id) == FALSE) %>% write.csv("test.csv")
order_main_pivot %>% filter(product_id == 0 & is.na(variation_id)==TRUE) %>%glimpse()
source('C:/Users/sjara/git/made-in-america-yarns/update_db.r', echo=TRUE)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:|colors:)[:alpha:]*[:space:]*[:alpha:]*[:space:]*[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
# product_
product <- order_main_pivot %>%
select(product_id,
variation_id,
name,
detail,
color)
View(product)
View(order_main_pivot)
glimpse(order_main_pivot)
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
product_id = case_when(product_id == "0" & is.na(variation_id) == FALSE ~variation_id,
TRUE ~ as.character(product_id)),
# variation_id = case_when(product_id == variation_id ~"0",
#                          TRUE ~ as.character(variation_id)),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:|colors:)[:alpha:]*[:space:]*[:alpha:]*[:space:]*[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
order_main_pivot %>%
filter(product_id==variation_id) %>% glimpse()
order_main_pivot %>%
filter(product_id == "0" & is.na(variation_id) == TRUE)  %>% glimpse()
77+165
order_main_pivot %>%
filter(product_id == "0" )  %>% glimpse()
order_main_pivot %>%
filter(product_id == "0" |variation_id)  %>% glimpse()
order_main_pivot %>%
filter(product_id == "0" |product_id==variation_id)  %>% glimpse()
order_main_pivot %>% filter(variation_id =="0")
order_main_pivot %>% filter(variation_id =="0") %>% glimpse()
order_main_pivot <- data$order_main %>%
pivot_longer(cols = starts_with("line_item"),
names_to = "item",
values_to = "item_description",
values_drop_na = TRUE) %>%
mutate("product_id" = str_extract(item_description, "(?<=product_id:)[:digit:]*"),
"variation_id" = str_extract(item_description, "(?<=variation_id:)[:digit:]*"),
product_id = case_when(product_id == "0" & is.na(variation_id) == FALSE ~variation_id,
TRUE ~ as.character(product_id)),
variation_id = case_when(product_id == variation_id ~"0",
TRUE ~ as.character(variation_id)),
"quantity" = str_extract(item_description, "(?<=quantity:)[:digit:]*(?=|total)"),
"name" = str_sub(str_trim(str_extract(item_description, "(?<=name:).*(?=product_id:)")),start=1, end=-2),
"color" = str_extract(item_description, "(?<=color:|colors:)[:alpha:]*[:space:]*[:alpha:]*[:space:]*[:alpha:]*")) %>%
separate(name, into = c("name", "detail"), sep = "-", extra="merge", fill="right") %>%
mutate_at(c("name", "detail"), str_trim)
order_main_pivot %>% filter(variation_id =="0") %>% glimpse()
data$order_main %>%
mutate("coupon" = str_extract(coupon_items, "(?<=code:).*(?=|amount:):]")) %>%
select(order_id,
coupon) %>% glimpse()
data$order_main %>%
mutate("coupon" = str_extract(coupon_items, "(?<=code:).*(?=|amount:)")) %>%
select(order_id,
coupon) %>% glimpse()
data$order_main %>%
mutate("coupon" = str_extract(coupon_items, "(?<=code:).*(?=amount:)")) %>%
select(order_id,
coupon) %>% glimpse()
data$order_main %>%
mutate("coupon" = str_sub(str_trim(str_extract(coupon_items, "(?<=code:).*(?=amount:)"))), start=1, end=-2) %>%
select(order_id,
coupon) %>% glimpse()
data$order_main %>%
mutate("coupon" = str_sub(str_trim(str_extract(coupon_items, "(?<=code:).*(?=amount:)"))), start=1, end=-3) %>%
select(order_id,
coupon) %>% glimpse()
str_sub("poop", start=1, end=-1)
str_sub("poop", start=1, end=-2)
data$order_main %>%
mutate("coupon" = str_sub(str_trim(str_extract(coupon_items, "(?<=code:).*(?=amount:)")), start=1, end=-2)) %>%
select(order_id,
coupon) %>% glimpse()
order_product <- order_main_pivot %>%
select(order_id,
product_id,
variation_id,
quantity)
order_product %>% filter(is.na(product_id)==TRUE)
order_product %>% filter(is.na(product_id)==TRUE) %>% glimpse()
order_product %>% filter(product_id)=="") %>% glimpse()
order_product %>% filter(product_id=="") %>% glimpse()
order_product %>% filter(product_id=="0") %>% glimpse()
data$product_main %>% glimpse()
