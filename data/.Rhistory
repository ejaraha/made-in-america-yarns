order <- read.csv("C:\Users\sjara\Downloads\wc_order.csv")
order <- read.csv("C:/Users/sjara/Downloads/wc_order.csv")
glimpse(order)
head(order)
install.packages(tidyverse)
install.packages("tidyverse")
glimpse(order)
library(dplyr)
glimpse(order)
shiny::runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
shiny::runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
library(shinythemes)
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
library(shiny)
library(shinythemes)
library(ggplot2)
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
glimpse(iris)
iris %>% ggplot(Sepal.Length) + geom_histogram()
iris %>% ggplot(aes(Sepal.Length)) + geom_histogram()
iris %>% ggplot(aes(Sepal.Length)) + geom_histogram() + theme(panel.background = =element_rect(fill=NA))
iris %>% ggplot(aes(Sepal.Length)) + geom_histogram() + theme(panel.background = element_rect(fill=NA))
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-order-explorer')
shiny::runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
shiny::runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
shiny::runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
setwd("C:/Users/sjara/git/made-in-america-yarns/data/")
# update data
#-------------------------------------------------------------
data <- update()
# normalize data
#-------------------------------------------------------------
data_norm <- normalize(data)
n_distinct(data$order_main["order_id"])
count(data$order_main["order_id"]) %>% arrange(desc(n)) %>% glimpse()
glimpse(data$product_main)
glimpse(data$role_main)
# update data
#-------------------------------------------------------------
data <- update()
data$product_main["id"][which(data$product_main["type"] != "variation" )] %>% glimpse()
data$product_main %>% glimpse()
data$product_main %>% filter(type != "variation") %>% n_distinct(id) %>% as.integer()
data$product_main %>% filter(type != "variation") %>% n_distinct("id") %>% as.integer()
source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
setwd("C:/Users/sjara/git/made-in-america-yarns/data/")
# update data
#-------------------------------------------------------------
data <- update()
source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
setwd("C:/Users/sjara/git/made-in-america-yarns/data/")
# update data
#-------------------------------------------------------------
data <- update()
# normalize data
#-------------------------------------------------------------
data_norm <- normalize(data)
# check primary keys
#-------------------------------------------------------------
check_primary_keys(primary_key_list())
# denormalize data
#-------------------------------------------------------------
data_denorm <- denormalize(data_norm)
source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
setwd("C:/Users/sjara/git/made-in-america-yarns/data/")
# update data
#-------------------------------------------------------------
data <- update()
# normalize data
#-------------------------------------------------------------
data_norm <- normalize(data)
# check primary keys
#-------------------------------------------------------------
check_primary_keys(primary_key_list())
# denormalize data
#-------------------------------------------------------------
data_denorm <- denormalize(data_norm)
View(data_denorm)
data_denorm %>% filter(effect == "unassigned") %>% glimpse()
data_denorm %>% filter(effect == "unassigned") %>% distinct(product_id, name, color) %>% glimpse()
test <- data_denorm %>% filter(effect == "unassigned") %>% distinct(product_id, name, color) %>% glimpse()
View(test)
test <- data_denorm %>% filter(effect == "unassigned") %>% distinct(product_id)
product_main %>% filter(id %in% test)
data$product_main %>% filter(id %in% test)
glimpse(data$product_main)
data$product_main %>% filter(id %in% test$product_id)
data$product_main %>% filter(id %in% test$product_id) %>% glimpse()
test_main <- data$product_main %>% filter(id %in% test$product_id)
View(test)
View(test_main)
str_extract_all( "effect > nub", "(?<=effect > )[^,]*")
test_main %>% mutate("effect" = str_extract_all( "effect > nub", "(?<=effect > )[^,]*")) %>% glimpse()
test_main_extract <- test_main %>% mutate("effect" = str_extract_all( "effect > nub", "(?<=effect > )[^,]*")) %>% glimpse()
View(test_main_extract)
test_main_extract <- test_main %>% mutate("effect" = str_extract_all( categories, "(?<=effect > )[^,]*")) %>% glimpse()
test_norm <- data_norm$product_effect %>% filter(id %in% test$product_id)
test_norm <- data_norm$product_effect %>% filter(product_id %in% test$product_id)
View(test_norm)
shiny::runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
source('C:/Users/sjara/git/made-in-america-yarns/update_db.r', echo=TRUE)
# export denormalized tables
#-------------------------------------------------------------
export_data(data_norm, data_denorm, data)
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
source('C:/Users/sjara/git/made-in-america-yarns/update_db.r', echo=TRUE)
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
data_denorm %>% filter(is.na(yarn_fiber) == TRUE)
data_denorm %>% filter(is.na(fiber) == TRUE)
data_denorm %>% filter(is.na(fiber) == TRUE) %>% glimpse()
data_denorm %>% filter(is.na(fiber) == TRUE) %>% distinct(product_id, name) %>% glimpse()
test_fiber <- data_denorm %>% filter(is.na(fiber) == TRUE) %>% distinct(product_id, name) %>% glimpse()
View(test_fiber)
# update data
#-------------------------------------------------------------
data <- update()
source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
setwd("C:/Users/sjara/git/made-in-america-yarns/data/")
# update data
#-------------------------------------------------------------
data <- update()
# normalize data
#-------------------------------------------------------------
data_norm <- normalize(data)
check_primary_keys(primary_key_list())
# denormalize data
#-------------------------------------------------------------
data_denorm <- denormalize(data_norm)
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
product_category <- data$product_main %>%
mutate("fiber" = str_extract_all(categories, "(?<=fiber > )[^,]*"),
"yarn_weight" = str_extract_all(categories, "(?<=yarn weight > )[^,]*"),
"effect" = str_extract_all(categories, "(?<=effect > )[^,]*"),
"hue" = str_extract_all(categories, "(?<=hue > )[^,]*"),
"big_cones" = case_when(str_detect(categories, "big cones")==TRUE ~"big cones",
TRUE ~ NA_character_),
"spools" = case_when(str_detect(categories, "spools")==TRUE ~"spools",
TRUE ~ NA_character_),
id = as.character(id))
View(product_category)
test <- product_category %>% filter(type != "variation")
View(test)
test_extract <- test %>%
mutate("fiber" = str_extract_all(categories, "(?<=fiber > )[^,]*"),
"yarn_weight" = str_extract_all(categories, "(?<=yarn weight > )[^,]*"),
"effect" = str_extract_all(categories, "(?<=effect > )[^,]*"),
"hue" = str_extract_all(categories, "(?<=hue > )[^,]*"),
"big_cones" = case_when(str_detect(categories, "big cones")==TRUE ~"big cones",
TRUE ~ NA_character_),
"spools" = case_when(str_detect(categories, "spools")==TRUE ~"spools",
TRUE ~ NA_character_),
id = as.character(id))
View(test_extract)
test_extract %>% filter(is.na(yarn_weight)==TRUE) %>% glimpse()
test_extract %>% filter(is.na(yarn_fiber)==TRUE) %>% glimpse()
test_extract %>% filter(is.na(fiber)==TRUE) %>% glimpse()
test_extract %>% filter(product_id %in% c("22215", "22210", "22211", "22211", "22213", "12386", "12384"))
View(test_extract)
test_extract %>% filter(id %in% c("22215", "22210", "22211", "22211", "22213", "12386", "12384")) %>% glimpse()
data$product_main %>% filter(id %in% c("22215", "22210", "22211", "22211", "22213", "12386", "12384")) %>% glimpse()
test <- data$product_main %>% filter(id %in% c("22215", "22210", "22211", "22211", "22213", "12386", "12384")) %>% glimpse()
View(test)
source('C:/Users/sjara/git/made-in-america-yarns/update_db.r', echo=TRUE)
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
data_denorm %>% filter(is.na(fiber)==TRUE)
data_denorm %>% filter(is.na(fiber)==TRUE) %>% glimpse()
test <- data_denorm %>% filter(is.na(fiber)==TRUE) %>% glimpse()
View(test)
source('C:/Users/sjara/git/made-in-america-yarns/update_db.r', echo=TRUE)
product_category <- data$product_main %>%
mutate("fiber" = str_extract_all(categories, "(?<=fiber > )[^,]*"),
"yarn_weight" = str_extract_all(categories, "(?<=yarn weight > )[^,]*"),
"effect" = str_extract_all(categories, "(?<=effect > )[^,]*"),
"hue" = str_extract_all(categories, "(?<=hue > )[^,]*"),
"big_cones" = case_when(str_detect(categories, "big cones")==TRUE ~"big cones",
TRUE ~ NA_character_),
"spools" = case_when(str_detect(categories, "spools")==TRUE ~"spools",
TRUE ~ NA_character_),
id = as.character(id))
test <- product_category %>% filter(type != "variation")
test_extract <- test %>%
mutate("fiber" = str_extract_all(categories, "(?<=fiber > )[^,]*"),
"yarn_weight" = str_extract_all(categories, "(?<=yarn weight > )[^,]*"),
"effect" = str_extract_all(categories, "(?<=effect > )[^,]*"),
"hue" = str_extract_all(categories, "(?<=hue > )[^,]*"),
"big_cones" = case_when(str_detect(categories, "big cones")==TRUE ~"big cones",
TRUE ~ NA_character_),
"spools" = case_when(str_detect(categories, "spools")==TRUE ~"spools",
TRUE ~ NA_character_),
id = as.character(id))
test_extract %>% filter(is.na(fiber)==TRUE) %>% glimpse()
test_extract %>% filter(is.na(yarn_weight)==TRUE) %>% glimpse()
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
data_denorm %>% filter(is.na(yarn_weight)==TRUE)
data_denorm %>% filter(is.na(yarn_weight)==TRUE) %>% glimpse()
data_denorm %>% filter(is.na(yarn_weight)==TRUE) %>% glimpse()
data_denorm %>% filter(is.na(yarn_weight)==TRUE) %>% distinct(product_id, name) %>% glimpse()
source('C:/Users/sjara/git/made-in-america-yarns/update_db.r', echo=TRUE)
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
# get data
data_denorm <- read.csv("https://raw.githubusercontent.com/sjaraha/made-in-america-yarns/master/miay-popular-products/denormalized.csv", stringsAsFactors = FALSE)
data_denorm %>% distinct(effect)
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
runApp('C:/Users/sjara/git/made-in-america-yarns/miay-popular-products')
