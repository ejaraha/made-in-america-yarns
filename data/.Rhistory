order <- read.csv("C:\Users\sjara\Downloads\wc_order.csv")
order <- read.csv("C:/Users/sjara/Downloads/wc_order.csv")
glimpse(order)
head(order)
install.packages(tidyverse)
install.packages("tidyverse")
glimpse(order)
library(dplyr)
glimpse(order)
import_new_data <- function(wd="C:/Users/sjara/git/made-in-america-yarns/data",
order_cols="order_cols.csv",
order="order_new_raw.csv",
product_cols="order_cols.csv",
product="product_new_raw.csv"){
setwd(wd)
# load order_cols and product_cols
# then filter them to create vectors of only the wanted fields
order_cols <- read.csv(order_cols) %>%
filter(keep==1)
product_cols <- read.csv(product_cols) %>%
filter(keep==1)
# load order and product dfs
# then use order_cols and product_cols to filter their fields
order <- read.csv(order) %>%
select(order_cols$variable)
product <- read.csv(product) %>%
select(product_cols$variable)
return(order)
return(product)
}
import_new_data()
library(dplyr)
library(tidyr)
library(lubridate)
import_new_data()
import_new_data <- function(wd="C:/Users/sjara/git/made-in-america-yarns/data",
order_cols="order_cols.csv",
order="order_new_raw.csv",
product_cols="product_cols.csv",
product="product_new_raw.csv"){
setwd(wd)
# load order_cols and product_cols
# then filter them to create vectors of only the wanted fields
order_cols <- read.csv(order_cols) %>%
filter(keep==1)
product_cols <- read.csv(product_cols) %>%
filter(keep==1)
# load order and product dfs
# then use order_cols and product_cols to filter their fields
order <- read.csv(order) %>%
select(order_cols$variable)
product <- read.csv(product) %>%
select(product_cols$variable)
return(order)
return(product)
}
import_new_data()
import_new_data <- function(wd="C:/Users/sjara/git/made-in-america-yarns/data",
order_cols="order_cols.csv",
order="order_new_raw.csv",
product_cols="product_cols.csv",
product="product_new_raw.csv"){
setwd(wd)
# load order_cols and product_cols
# then filter them to create vectors of only the wanted fields
order_cols <- read.csv(order_cols) %>%
filter(keep==1)
product_cols <- read.csv(product_cols) %>%
filter(keep==1)
# load order and product dfs
# then use order_cols and product_cols to filter their fields
order <- read.csv(order) %>%
select(order_cols$variable)
product <- read.csv(product) %>%
select(product_cols$variable)
return(c(order,product))
}
test <- import_new_data()
test_order <- test[1]
test_order <- as.dataframe(test[1])
test_order <- as.data_frame(test[1])
test_order <- data_frame(test[1])
test_order <- dataframe(test[1])
test_order <- data.frame(test[1])
test_product <- data.frame(test[2])
glimpse(test_order)
glimpse(test_product)
View(test)
test_product <- do.call("cbind", test[2])
glimpse(test_order)
test_product <- do.call("rbind", test[2])
glimpse(test_order)
typof(test_product)
typ_of(test_product)
typeof(test_product)
class(test_product)
list(test_order)
test_order <- list(test_order)
test_product <- data.frame(test[[2]])
test_order <- data.frame(test[[1]])
test_product <- test[[2]]
test_order <- test[[1]]
class(test_order)
typepf(test_order)
typeof(test_order)
test_product <- as.data.frame(test[[2]])
View(test_product)
View(test_product)
test_product <- as.data.frame(test[["order]])
test_order <- test[[1]]
# CLEAN order df
#--------------------------------------------------------------
order <- order %>%
mutate(order_id = as.character(order_id),
order_date = ymd_hms(order$order_date),
order_hour = hour(order_date),
order_date = as_date(ymd_hms(order$order_date)),
customer_id_addition = 1:nrow(order)) %>%
mutate_if(is.character, list(~na_if(tolower(.),""))) %>%
unite("customer_id", c(customer_id, customer_id_addition), sep="_")
glimpse(order)
check_empty(order)
# CLEAN product df
#--------------------------------------------------------------
product <- product %>%
mutate(ID = as.character(ID)) %>%
mutate_if(is.character, list(~na_if(tolower(.),"")))
glimpse(product)
check_empty(product)
test_product <- as.data.frame(test[[order]])
test_product <- as.data.frame(test[["order"]])
View(test)
test <- import_new_data()
df_1 <- data.frame("a"=c(1,2,3), "b"=c(4,5,6))
df_2 <- data.frame("c"=c(1,2,3), "d"=c(4,5,6))
test <- list(df_1, df_2)
test
test[[2]]
setwd(wd)
# load order_cols and product_cols
# then filter them to create vectors of only the wanted fields
order_cols <- read.csv(order_cols) %>%
filter(keep==1)
product_cols <- read.csv(product_cols) %>%
filter(keep==1)
# load order and product dfs
# then use order_cols and product_cols to filter their fields
order <- read.csv(order) %>%
select(order_cols$variable)
product <- read.csv(product) %>%
select(product_cols$variable)
wd="C:/Users/sjara/git/made-in-america-yarns/data"
order_cols="order_cols.csv"
#                         order="order_new_raw.csv"
order="order_new_raw.csv"
product_cols="product_cols.csv"
product="product_new_raw.csv")
product="product_new_raw.csv"
setwd(wd)
# load order_cols and product_cols
# then filter them to create vectors of only the wanted fields
order_cols <- read.csv(order_cols) %>%
filter(keep==1)
product_cols <- read.csv(product_cols) %>%
filter(keep==1)
# load order and product dfs
# then use order_cols and product_cols to filter their fields
order <- read.csv(order) %>%
select(order_cols$variable)
product <- read.csv(product) %>%
select(product_cols$variable)
list(product, order)
test <- list(product, order)
import_new_data <- function(wd="C:/Users/sjara/git/made-in-america-yarns/data",
order_cols="order_cols.csv",
order="order_new_raw.csv",
product_cols="product_cols.csv",
product="product_new_raw.csv"){
setwd(wd)
# load order_cols and product_cols
# then filter them to create vectors of only the wanted fields
order_cols <- read.csv(order_cols) %>%
filter(keep==1)
product_cols <- read.csv(product_cols) %>%
filter(keep==1)
# load order and product dfs
# then use order_cols and product_cols to filter their fields
order <- read.csv(order) %>%
select(order_cols$variable)
product <- read.csv(product) %>%
select(product_cols$variable)
data <- list(order, product)
return(data)
}
test <- import_new_data()
test_product <- as.data.frame(test[[1]])
test_order <- as.data.frame(test[[2]])
import_new_data <- function(wd="C:/Users/sjara/git/made-in-america-yarns/data",
order_cols="order_cols.csv",
order="order_new_raw.csv",
product_cols="product_cols.csv",
product="product_new_raw.csv"){
setwd(wd)
# load order_cols and product_cols
# then filter them to create vectors of only the wanted fields
order_cols <- read.csv(order_cols) %>%
filter(keep==1)
product_cols <- read.csv(product_cols) %>%
filter(keep==1)
# load order and product dfs
# then use order_cols and product_cols to filter their fields
order <- read.csv(order) %>%
select(order_cols$variable)
product <- read.csv(product) %>%
select(product_cols$variable)
# data <- list(order, product)
# return(data)
return(list(order, product))
}
test <- import_new_data()
test_product <- as.data.frame(test[[1]])
test_order <- as.data.frame(test[[2]])
wd="C:/Users/sjara/git/made-in-america-yarns/data"
source('C:/Users/sjara/git/made-in-america-yarns/clean.r', echo=TRUE)
source('C:/Users/sjara/git/made-in-america-yarns/clean.r', echo=TRUE)
order <- import_new_data(as.data.frame(order[[1]]))
order <- import_new_data()
order <- as.data.frame(order[[1]])
source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
wd="C:/Users/sjara/git/made-in-america-yarns/data"
order <- import_new_data()
import_new_data <- function(wd=wd,
order_cols="order_cols.csv",
order="order_raw.csv",
product_cols="product_cols.csv",
product="product_raw.csv"){
# load order_cols and product_cols
# then filter them to create vectors of only the wanted fields
order_cols <- read.csv(order_cols) %>%
filter(keep==1)
product_cols <- read.csv(product_cols) %>%
filter(keep==1)
# load order and product dfs
# then use order_cols and product_cols to filter their fields
order <- read.csv(order) %>%
select(order_cols$variable)
product <- read.csv(product) %>%
select(product_cols$variable)
return(list(order, product))
}
order <- import_new_data()
product <- import_new_data(as.data.frame(product[[2]]))
View(product)
order <- import_new_data()
order <- as.data.frame(order[[1]])
product <- import_new_data()
product <- as.data.frame(product[[2]])
source("C:/Users/sjara/git/made-in-america-yarns/clean.R")
source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
source("C:/Users/sjara/git/made-in-america-yarns/clean.R")
source('C:/Users/sjara/git/made-in-america-yarns/clean.r', echo=TRUE)
source('C:/Users/sjara/git/made-in-america-yarns/clean.r', echo=TRUE)
source('C:/Users/sjara/git/made-in-america-yarns/clean.r', echo=TRUE)
order <- clean_order()
order <- clean_order(order = order)
order <- clean_order()
product <- clean_product()
# import data as a list
data <- import_new_data()
source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
wd="C:/Users/sjara/git/made-in-america-yarns/data"
# import data as a list
data <- import_new_data()
source('C:/Users/sjara/git/made-in-america-yarns/clean.r', echo=TRUE)
library(dplyr)
library(tidyr)
library(lubridate)
source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
wd="C:/Users/sjara/git/made-in-america-yarns/data"
# import data
#--------------------------------------------------------------
# import data as a list
data <- import_new_data()
# extract data frames from list
order <- as.data.frame(data[[1]])
product <- as.data.frame(data[[2]])
# clean data
#--------------------------------------------------------------
order <- clean_order()
product <- clean_product()
source('C:/Users/sjara/git/made-in-america-yarns/clean.r', echo=TRUE)
source('C:/Users/sjara/git/made-in-america-yarns/clean.r', echo=TRUE)
source('C:/Users/sjara/git/made-in-america-yarns/clean.r', echo=TRUE)
source('C:/Users/sjara/git/made-in-america-yarns/update.R', echo=TRUE)
source('C:/Users/sjara/git/made-in-america-yarns/update.R', echo=TRUE)
a <- data.frame("a"=c(1,2,3,4), "b"=c(4,5,6,7))
b <- data.frame("a"=c(1,2,3,4,8,9), "b"=c(4,5,6,7,8,9))
row_upsert(a,b,by="a")
rows_upsert(a,b,by="a")
a <- data.frame("a"=c(1,2,3,4), "b"=c(4,5,6,7))
b <- data.frame("a"=c(1,7,7,4,8,9), "b"=c(4,5,6,7,8,9))
rows_upsert(a,b,by="a")
a <- data.frame("a"=c(1,2,3,4), "b"=c(4,5,6,7))
b <- data.frame("a"=c(1,2,7,4,8,9), "b"=c(4,5,6,7,8,9))
rows_upsert(a,b,by="a")
a <- data.frame("a"=c(1,2,3,4), "b"=c(4,5,6,7))
b <- data.frame("a"=c(1,2,7,4,8,9), "b"=c(4,5,7,7,8,9))
rows_upsert(a,b,by="a")
rows_upsert(b,a,by="a")
a <- data.frame("a"=c(1,2,3), "b"=c(4,5,6))
b <- data.frame("a"=c(1,2,2), "b"=c(4,5,6))
a <- data.frame("a"=c(1,2,3), "b"=c(4,5,6))
b <- data.frame("a"=c(1,2,3), "b"=c(4,5,7))
rows_upsert(a,b,by="a")
rows_upsert(b,a,by="a")
a <- data.frame("a"=c(1,2,3), "b"=c(4,5,6))
b <- data.frame("a"=c(1,2,3), "b"=c(4,5,7,1))
a <- data.frame("a"=c(1,2,3), "b"=c(4,5,6))
b <- data.frame("a"=c(1,2,3,NA), "b"=c(4,5,7,1))
rows_upsert(a,b,by="a")
rows_upsert(b,a,by="a")
a <- data.frame("a"=c(1,2,3), "b"=c(4,5,6))
b <- data.frame("a"=c(1,2,3,1), "b"=c(4,5,7,1))
rows_upsert(a,b,by="a")
a <- data.frame("a"=c(1,2,3), "b"=c(4,5,6))
b <- data.frame("a"=c(1,2,3,4), "b"=c(4,5,7,1))
rows_upsert(a,b,by="a")
rows_upsert(b,a,by="a")
glimpse(order)
glimpse(product)
unique(product$ID)
count(unique(product$ID))
nrow(unique(product$ID))
length(unique(product$ID))
product_main <- read.csv("product_main.csv")
order_main <- read.csv("order_main.csv")
View(product_main)
rows_upsert(order_main, order, by="order_id")
View(order_main)
source("C:/Users/sjara/git/made-in-america-yarns/clean.R")
#source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
wd <- "C:/Users/sjara/git/made-in-america-yarns/data"
order_main <- read.csv("order_main.csv")
product_main <- read.csv("product_main.csv")
rows_upsert(order_main, order, by="order_id")
rows_upsert(product_main,product, by="ID")
order_main <- read.csv("order_main.csv") %>% rows_upsert(order, by="order_id")
source('C:/Users/sjara/git/made-in-america-yarns/update.R', echo=TRUE)
library(dplyr)
library(tidyr)
library(lubridate)
source("C:/Users/sjara/git/made-in-america-yarns/clean.R")
#source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
wd <- "C:/Users/sjara/git/made-in-america-yarns/data"
order_main <- read.csv("order_main.csv")
product_main <- read.csv("product_main.csv")
order_main <- rows_upsert(order_main, order, by="order_id")
View(order_main)
View(order_main)
write.csv(order,"order_main.csv", row.names = FALSE)
write(product, "product_main.csv",row.names=FALSE)
write.csv(product, "product_main.csv",row.names=FALSE)
source('C:/Users/sjara/git/made-in-america-yarns/update.R', echo=TRUE)
View(order_main)
glimpse(order_main)
glmipse(order)
glimpse(order)
source("C:/Users/sjara/git/made-in-america-yarns/clean.R")
#source("C:/Users/sjara/git/made-in-america-yarns/functions.R")
wd <- "C:/Users/sjara/git/made-in-america-yarns/data"
write.csv(order, "order_main.csv", row.names = FALSE)
write.csv(product, "product_main.csv", row.names = FALSE)
order_main <- read.csv("order_main.csv")
product_main <- read.csv("product_main.csv")
order_main <- rows_upsert(order_main, order, by="order_id")
product_main <- rows_upsert(product_main,product, by="ID")
a
b
rows_upsert(a,b)
